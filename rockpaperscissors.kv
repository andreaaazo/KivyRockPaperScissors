#: import utils kivy.utils
MainWidget:

# PALETTE:
# text: #84a98c
# bg: #cad2c5
# cards: #2f3e46

<MainWidget>:

    ai_choice_img: ai_choice_img
    user_choice_img: user_choice_img
    scoreboard: scoreboard

    Image:
        source: "lib/background.png"
        size: self.size
        pos: 0, 0
        allow_stretch: True
        keep_ratio: False

    BoxLayout:
        orientation: "horizontal"
        
        BoxLayout:  # USER CHOICE
            orientation: "vertical"
            size_hint: .2, .2
            pos_hint: {"center_y" : .5}
            spacing: 20
            ChoiceRoundedButton:
                Button:
                    background_normal: ""
                    background_color: (0,0,0,0)
                    on_press: 
                        root.set_button_color(self.parent)
                        root.on_press_rock_button()
                    on_release: 
                        root.reset_button_color(self.parent)
                    Image:
                        source: "lib/rock.png"
                        size: self.parent.size
                        pos: self.parent.pos
                
            ChoiceRoundedButton:
                Button:
                    background_normal: ""
                    background_color: (0,0,0,0)
                    on_press:
                        root.set_button_color(self.parent)
                        root.on_press_scissors_button()
                    on_release: 
                        root.reset_button_color(self.parent)
                    Image:
                        source: "lib/scissors.png"
                        size: self.parent.size
                        pos: self.parent.pos

            ChoiceRoundedButton:
                Button:
                    background_normal: ""
                    background_color: (0,0,0,0)
                    on_press:
                        root.set_button_color(self.parent)
                        root.on_press_paper_button()
                    on_release: 
                        root.reset_button_color(self.parent)
                    Image:
                        source: "lib/paper.png"
                        size: self.parent.size
                        pos: self.parent.pos

        BoxLayout:  # GAME
            orientation: "vertical"
            size_hint: .6, 1
            Label:
                size_hint: 1, .4
                text: "ROCK PAPER SCISSORS"
                color: 0, 0, 0
                font_name: "fonts/black.ttf"
                font_size: (root.width+root.height) / 50
            BoxLayout:
                orientation: "horizontal"
                size_hint: 1, .3
                Label:
                    text: "YOU"
                    color: 0, 0, 0
                    font_name: "fonts/bold.ttf"
                    font_size: (root.width+root.height) / 60
                Label:
                    size_hint: 1, 1
                Label:
                    text: "AI"
                    color: 0, 0, 0
                    font_name: "fonts/bold.ttf"
                    font_size: (root.width+root.height) / 60
            BoxLayout: 
                orientation: "horizontal"

                BoxLayout:
                    padding: 30
                    canvas.before:
                        Color:
                            rgb: utils.get_color_from_hex("#2f3e46")
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [30]
                    Image:
                        id: user_choice_img
                        allow_stretch: True
                        keep_ratio: True
                        size_hint: .5, .5
                        pos_hint: {"center_x" : .5, "center_y" : .5}


                Label:
                    text: "VS"
                    color: 0, 0, 0
                    font_name: "fonts/extrabold.ttf"
                    font_size: (root.width+root.height) / 50

                BoxLayout:
                    padding: 30
                    canvas.before:
                        Color:
                            rgb: utils.get_color_from_hex("#2f3e46")
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [30]
                    Image:
                        id: ai_choice_img
                        source: "lib/rock.png"
                        allow_stretch: True
                        keep_ratio: True
                        size_hint: .5, .5
                        pos_hint: {"center_x" : .5, "center_y" : .5}

            RelativeLayout:
                size_hint: 1, .5
                canvas.before:
                    Color:
                        rgb: utils.get_color_from_hex("#2f3e46")
                    RoundedRectangle:
                        radius: [25]
                        size: self.width, self.height/1.7
                        pos: self.width/2 - self.width/2, self.height / 2 - self.height/3.4

                BoxLayout:
                    orientation: "horizontal"
                    size_hint: 1, 1
                    Label:
                        text: str(root.user_score)
                        color: utils.get_color_from_hex("#84a98c")
                        font_name: "fonts/bold.ttf"
                        font_size: (root.width+root.height) / 50
                    Label:
                        id: scoreboard
                        text: "START!"
                        color: utils.get_color_from_hex("#84a98c")
                        font_name: "fonts/extrabold.ttf"
                        font_size: (root.width+root.height) / 50
                    Label:
                        text: str(root.ai_score)
                        color: utils.get_color_from_hex("#84a98c")
                        font_name: "fonts/bold.ttf"
                        font_size: (root.width+root.height) / 50
            BoxLayout:
                orientation: "horizontal"
                size_hint: 1, .5
                RelativeLayout:
                    canvas.before:
                        Color:
                            rgb: utils.get_color_from_hex("#2f3e46")
                        RoundedRectangle:
                            radius: [30]
                            size: self.width*0.8, self.height*0.5
                            pos: self.width / 2 - self.width*0.8/2, self.height / 2 - self.height*0.5/2

                    BoxLayout:
                        orientation: "horizontal"
                        size_hint: .65, .4
                        pos_hint: {"center_x" : .5, "center_y" : .5}

                        Image:
                            source: "lib/flame.png"
                            allow_stretch: True
                            keep_ratio: True
                            size_hint: 1, .9

                        Label:
                            text: "x9"
                            color: utils.get_color_from_hex("#84a98c")
                            font_name: "fonts/bold.ttf"
                            font_size: (root.width+root.height) / 50
                    

                Label:
                    size_hint: 1, 1

                RelativeLayout:
                    canvas.before:
                        Color:
                            rgb: utils.get_color_from_hex("#2f3e46")
                        RoundedRectangle:
                            radius: [30]
                            size: self.width*0.8, self.height*0.5
                            pos: self.width / 2 - self.width*0.8/2, self.height / 2 - self.height*0.5/2
                    BoxLayout:
                        orientation: "horizontal"
                        size_hint: .65, .4
                        pos_hint: {"center_x" : .5, "center_y" : .5}
                        
                        Image:
                            source: "lib/flame.png"
                            allow_stretch: True
                            keep_ratio: True
                            size_hint: 1, .9

                        Label:
                            text: "x14"
                            color: utils.get_color_from_hex("#84a98c")
                            font_name: "fonts/bold.ttf"
                            font_size: (root.width+root.height) / 50

        BoxLayout:  # SPACING
            size_hint: .2, 1



<ChoiceRoundedButton@BoxLayout>:
    size_hint: 0.25, 0.5
    pos_hint: {"center_x" : .5}
    background_normal: ""
    background_color: (0,0,0,0)
    padding: 10
    canvas.before:
        Color:
            group: "color"
            rgb: utils.get_color_from_hex("#2f3e46")
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [15]